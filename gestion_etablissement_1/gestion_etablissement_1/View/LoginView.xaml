<UserControl x:Class="gestion_etablissement_1.View.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:gestion_etablissement_1.ViewModel"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <!-- ViewModel -->
    <UserControl.DataContext>
        <vm:LoginViewModel/>
    </UserControl.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>

        <!-- Bloc de gauche -->
        <Grid Grid.Column="0" ClipToBounds="True">
            <!-- fond violet -->
            <Path Fill="{StaticResource LoginLeftColor}" Stretch="Fill">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure StartPoint="0,0">
                            <LineSegment Point="1,0"/>
                            <LineSegment Point="0.8,1"/>
                            <LineSegment Point="0,1"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
            </Path>

            <!-- petites formes décoratives -->
            <Canvas>
                <Ellipse Width="80" Height="80" Fill="#9D5FFF" Opacity="0.8" 
                       Canvas.Right="30" Canvas.Top="50"/>
                <Ellipse Width="100" Height="100" Fill="#9D5FFF" Opacity="0.8" Canvas.Bottom="50" Canvas.Top="328"/>
                <Polygon Points="0,0 60,0 0,60" Fill="#9D5FFF" Opacity="0.8" 
                       Canvas.Left="0" Canvas.Top="0"/>
                <Ellipse Width="120" Height="120" Fill="#6B1FD7" Opacity="0.2" 
                       Canvas.Left="-40" Canvas.Bottom="80"/>
            </Canvas>


            <StackPanel Orientation="Vertical"
                      VerticalAlignment="Center"
                      HorizontalAlignment="Center">
                <Image Height="194" Stretch="Uniform" Source="../Image/logo.png"/>
                <TextBlock Text="Connectez-vous"
                         FontSize="30"
                         Foreground="White"
                         FontWeight="Bold"
                         Margin="10"
                         HorizontalAlignment="Center"/>
                <TextBlock Text="Pour accéder à la gestion"
                         FontSize="15"
                         TextWrapping="Wrap"
                         FontWeight="Medium"
                         Foreground="White"
                         Margin="0,15,0,0"
                         TextAlignment="Center"
                         MaxWidth="200"/>
            </StackPanel>
        </Grid>

        <!-- Bloc de droite (formulaire) -->
        <StackPanel Grid.Column="1"
                  Orientation="Vertical"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Center">

            <!-- Nom d'utilisateur -->
            <Label Content="Nom d'utilisateur :"
                 Style="{StaticResource LoginLabel}"/>
            <TextBox Text="{Binding Username}"
                   Width="250"
                   Height="30"
                   Margin="0,5,0,10"
                   Style="{StaticResource RoundedTexBox}"
                   Name="Login" />

            <!-- Mot de passe -->
            <Label Content="Mot de passe :"
                 Style="{StaticResource LoginLabel}"/>

            <PasswordBox Width="250"
                       Height="30"
                       Margin="0,5,0,10"
                       Style="{StaticResource RoundedPasswordBox}"
                       Name="PasswordBoxControl"
                       PasswordChanged="PasswordBoxControl_PasswordChanged"/>

            <!-- Bouton connexion -->
            <Button Content="Connexion"
                  Style="{StaticResource LoginPrimaryButton}"
                  Margin="0,15,0,0"
                  Command="{Binding LoginCommand}"
                  Click="Button_Click"/>

            <!-- message d'erreur -->
            <TextBlock Text="{Binding ErrorMessage}"
                     Foreground="Red"
                     HorizontalAlignment="Center"
                     Margin="0,10,0,0"/>
        </StackPanel>

    </Grid>
</UserControl>
